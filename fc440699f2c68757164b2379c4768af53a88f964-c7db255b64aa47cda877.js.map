{"version":3,"sources":["webpack:///./src/utils/sortByYomi.ts","webpack:///./src/utils/graphql-hooks/useAllPrograms.tsx","webpack:///./src/utils/graphql-hooks/useAllTunes.tsx","webpack:///./src/utils/graphql-hooks/useAllArtists.tsx","webpack:///./src/utils/graphql-hooks/useAllCategories.tsx","webpack:///./src/utils/graphql-hooks/useAllNations.tsx","webpack:///./src/utils/graphql-hooks/useAllYears.tsx"],"names":["sortArtists","artists","options","sortType","sort","a","b","edges","length","sortByEdges","sortByYomi","tunes","sortByTunes","getYomi","fieldValue","kana","localeCompare","artistName","the","slice","useAllPrograms","data","React","allProgram","map","node","img","playlist","filter","tune","index","youtube","useAllTunes","reduce","accum","curr","useAllArtists","group","item","d","id","indexOf","removeMultiple","artist","nation","undefined","useArtists","limit","allArtists","useAllCategories","useCategories","fieldValues","categories","category","includes","useAllNations","nations","Array","from","Set","useDecades","years","forEach","year","Error","allTunes","allYears","parseInt","first","Math","floor","last","Date","getFullYear","_","i","decade","items","value"],"mappings":"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","file":"fc440699f2c68757164b2379c4768af53a88f964-c7db255b64aa47cda877.js","sourcesContent":["import { ArtistItem } from './graphql-hooks';\n\nexport type SortType = 'abc' | 'edges' | 'tunes';\n\ninterface SortArtistsOptions {\n  sortType?: SortType;\n  sortAsc?: boolean;\n}\n\nexport default function sortArtists(artists: ArtistItem[], options: SortArtistsOptions = {}) {\n  const sortType = options.sortType || 'abc';\n  return [...artists].sort((a, b) =>\n    sortType === 'edges'\n      ? sortByEdges(a, b) || sortByYomi(a, b)\n      : sortType === 'tunes'\n      ? sortByTunes(a, b) || sortByYomi(a, b)\n      : sortByYomi(a, b)\n  );\n}\n\nexport function sortByYomi(a: ArtistItem, b: ArtistItem) {\n  return getYomi(a.fieldValue, a.kana).localeCompare(getYomi(b.fieldValue, b.kana));\n}\n\nexport function sortByEdges(a: ArtistItem, b: ArtistItem) {\n  return -(a.edges.length - b.edges.length);\n}\n\nexport function sortByTunes(a: ArtistItem, b: ArtistItem) {\n  return -(a.tunes.length - b.tunes.length);\n}\n\nexport function getYomi(artistName: string, kana?: string) {\n  const the = artistName.slice(0, 4);\n  if (the === 'The ' || the === 'THE ' || the === 'the ') return artistName.slice(4);\n  return kana || artistName;\n}\n\nexport function encodeArtistName(artistName: string) {\n  return encodeURIComponent(artistName.replace(/[' ']+/g, '_'));\n}\n\nexport function decodeArtistName(artistName: string) {\n  return decodeURIComponent(artistName.replace(/['_']+/g, ' '));\n}\n","import * as React from 'react';\nimport { useStaticQuery, graphql } from 'gatsby';\nimport { AllProgramQuery } from '../../../graphql-types';\n\nexport type ProgramEdge = AllProgramQuery['allProgram']['edges'][number];\n\nexport function useAllPrograms() {\n  const data = useStaticQuery<AllProgramQuery>(graphql`\n    query AllProgram {\n      allProgram(sort: { fields: week, order: ASC }) {\n        edges {\n          node {\n            id\n            title\n            date(formatString: \"YYYY-MM-DD\")\n            categories\n            fields {\n              slug\n            }\n            guests\n            playlist {\n              artist\n              corner\n              id\n              indexInWeek\n              index\n              kana\n              label\n              nation\n              producer\n              selector\n              title\n              week\n              year\n              youtube\n            }\n            subtitle\n            week\n            year\n          }\n        }\n      }\n    }\n  `);\n  return React.useMemo(() => {\n    return data.allProgram.edges.map(({ node }) => {\n      const [img] =\n        node.playlist?.filter((tune, index) => index !== 0 && tune?.youtube && tune.youtube !== '').map((tune) => tune?.youtube) ?? [];\n      return {\n        ...node,\n        img: img ? `https://i.ytimg.com/vi/${img}/0.jpg` : null,\n      };\n    });\n  }, [data.allProgram.edges]);\n}\n","import * as React from 'react';\nimport { useAllPrograms, ProgramEdge } from './useAllPrograms';\n\nexport function useAllTunes() {\n  const allProgram = useAllPrograms();\n  type Playlist = NonNullable<ProgramEdge['node']['playlist']>;\n  return React.useMemo(() => allProgram.reduce<Playlist>((accum, curr) => (curr.playlist ? [...accum, ...curr.playlist] : accum), []), [\n    allProgram,\n  ]);\n}\n","import * as React from 'react';\nimport { useStaticQuery, graphql } from 'gatsby';\nimport sortArtists, { SortType } from '../sortByYomi';\nimport { AllArtistsQuery } from '../../../graphql-types';\n\ntype ArtistGroup = AllArtistsQuery['allProgram']['group'][number];\ntype ArtistEdge = ArtistGroup['edges'][number];\ntype ArtistTune = NonNullable<NonNullable<ArtistEdge['node']['playlist']>[number]>;\n\nexport interface ArtistItem {\n  fieldValue: string;\n  kana?: string;\n  nation: string;\n  edges: ArtistEdge[];\n  tunes: ArtistTune[];\n  img?: string;\n}\n\nexport function useAllArtists() {\n  const data = useStaticQuery<AllArtistsQuery>(graphql`\n    query AllArtists {\n      allProgram(sort: { fields: date, order: ASC }) {\n        group(field: playlist___artist) {\n          edges {\n            node {\n              id\n              playlist {\n                artist\n                kana\n                nation\n                youtube\n              }\n            }\n          }\n          fieldValue\n        }\n      }\n    }\n  `);\n  return React.useMemo(() => {\n    return data.allProgram.group.map((item) => {\n      const edges = removeMultiple(item.edges).map(({ node }) => ({\n        ...node,\n        playlist: (node?.playlist?.filter((tune) => tune?.artist === item.fieldValue) ?? []) as ArtistTune[],\n      }));\n      const tunes = edges.reduce<ArtistTune[]>((accum, curr) => (curr.playlist ? [...accum, ...curr.playlist] : accum), []);\n      const [{ kana, nation }] = tunes;\n      const [img] = tunes\n        .filter((tune) => tune?.youtube && tune.youtube !== '')\n        .map((tune) => tune?.youtube)\n        .slice(-1);\n\n      return {\n        fieldValue: item.fieldValue ?? '',\n        kana: kana ?? undefined,\n        nation: nation ?? '',\n        edges,\n        tunes,\n        img: img ? `https://i.ytimg.com/vi/${img}/0.jpg` : undefined,\n      };\n    });\n  }, [data]);\n}\n\nfunction removeMultiple(edges: ArtistEdge[]) {\n  return edges.reduce<ArtistEdge[]>((accum, curr) => {\n    if (accum.map((d) => d.node.id).indexOf(curr.node.id) >= 0) return accum;\n    return [...accum, curr];\n  }, []);\n}\n\nexport function useArtists(sortType: SortType, limit = 0) {\n  const allArtists = useAllArtists();\n  return React.useMemo(() => {\n    return sortArtists(allArtists, { sortType }).slice(0, limit || allArtists.length);\n  }, [sortType, limit, allArtists]);\n}\n","import * as React from 'react';\nimport { useStaticQuery, graphql } from 'gatsby';\nimport { AllCategoriesQuery } from '../../../graphql-types';\n\nexport function useAllCategories() {\n  const data = useStaticQuery<AllCategoriesQuery>(graphql`\n    query AllCategories {\n      allProgram(sort: { fields: week, order: ASC }) {\n        group(field: categories) {\n          fieldValue\n          edges {\n            node {\n              id\n              week\n              title\n              date(formatString: \"YYYY-MM-DD\")\n              fields {\n                slug\n              }\n            }\n          }\n        }\n      }\n    }\n  `);\n  return React.useMemo(() => {\n    return data.allProgram.group.sort((a, b) => b.edges.length - a.edges.length);\n  }, [data]);\n}\n\nexport function useCategories(fieldValues: string[]) {\n  const categories = useAllCategories();\n  return React.useMemo(() => {\n    return categories.filter((category) => category.fieldValue && fieldValues.includes(category.fieldValue));\n  }, [fieldValues, categories]);\n}\n","import * as React from 'react';\nimport { useAllArtists } from './useAllArtists';\n\nexport function useAllNations() {\n  const allArtists = useAllArtists();\n  const nations = Array.from(new Set(allArtists.map((artist) => artist.nation)));\n\n  return React.useMemo(() => {\n    return nations\n      .map((nation) => ({\n        nation,\n        artists: allArtists.filter((artist) => nation === artist.nation).length,\n        tunes: allArtists.filter((artist) => nation === artist.nation).reduce((accum, curr) => accum + curr.tunes.length, 0),\n      }))\n      .sort((a, b) => b.artists - a.artists || a.nation.localeCompare(b.nation));\n  }, [nations, allArtists]);\n}\n","import * as React from 'react';\nimport { useStaticQuery, graphql } from 'gatsby';\nimport { useAllTunes } from './useAllTunes';\nimport { AllYearsQuery } from '../../../graphql-types';\n\nexport function useAllYears() {\n  const allTunes = useAllTunes();\n  const data = useStaticQuery<AllYearsQuery>(graphql`\n    query AllYears {\n      allProgram {\n        group(field: playlist___year) {\n          fieldValue\n        }\n      }\n    }\n  `);\n  return React.useMemo(\n    () =>\n      data.allProgram.group.map(({ fieldValue }) => ({\n        fieldValue: fieldValue,\n        tunes: allTunes.filter((tune) => tune?.year === parseInt(fieldValue ?? '0', 10)),\n      })),\n    [allTunes, data]\n  );\n}\n\nexport function useDecades(years: number[] = []) {\n  years.forEach((year) => {\n    if (year % 10 !== 0) throw new Error();\n  });\n  const allYears = useAllYears();\n\n  return React.useMemo(() => {\n    const first = Math.floor(parseInt(allYears[0].fieldValue ?? '1960', 10) / 10) * 10;\n    const last = Math.floor(new Date().getFullYear() / 10) * 10;\n    const decades = years.length ? years : Array.from({ length: (last - first) / 10 + 1 }, (_, i) => first + i * 10);\n    return decades.map((decade) => {\n      const items = allYears.filter(({ fieldValue }) => Math.floor(parseInt(fieldValue ?? '0', 10) / 10) === decade / 10);\n      return {\n        fieldValue: `${decade}s`,\n        value: items.reduce((accum, curr) => accum + curr.tunes.length, 0),\n        items,\n      };\n    });\n  }, [allYears, years]);\n}\n"],"sourceRoot":""}